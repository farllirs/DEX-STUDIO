<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEX STUDIO | Creador de Apps para Linux</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

<!-- ‚îÄ‚îÄ Splash Screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="splash-screen">
    <img src="../dex-icon.png" id="splash-logo">
    <div id="splash-title">DEX STUDIO</div>
    <div id="splash-sub">Creador de Aplicaciones para Linux</div>
    <div id="splash-bar"><div id="splash-progress"></div></div>
    <div id="splash-status">Iniciando...</div>
</div>

<!-- ‚îÄ‚îÄ Custom Window Bar (Mac Style) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="window-bar" class="window-bar">
    <div class="window-drag-region" ondblclick="app.windowControl('maximize')">
        <div class="window-controls">
            <button class="window-btn window-btn-close" title="Cerrar" onclick="app.windowControl('close')"></button>
            <button class="window-btn window-btn-min" title="Minimizar" onclick="app.windowControl('minimize')"></button>
            <button class="window-btn window-btn-max" title="Maximizar / Restaurar" onclick="app.windowControl('maximize')"></button>
        </div>
        <div class="window-title">
            <img src="assets/logo.png" alt="DEX" class="window-title-logo">
            <span>DEX STUDIO</span>
        </div>
        <div class="window-tools">
            <button id="window-drag-lock" class="window-tool-btn is-enabled" title="Desactivar movimiento de ventana" onclick="app.toggleWindowDragLock()">
                <i id="window-drag-lock-icon" data-lucide="lock-open"></i>
            </button>
        </div>
    </div>
</div>

<div class="app-container">

    <!-- ‚îÄ‚îÄ Activity Bar (VS Code style) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="activity-bar">
        <div class="activity-bar-top">
            <button class="activity-icon active" onclick="app.showView('home')" data-view="home" title="Inicio">
                <i data-lucide="home"></i>
            </button>
            <button class="activity-icon" onclick="app.showView('editor')" data-view="editor" title="Explorador">
                <i data-lucide="files"></i>
            </button>
            <button class="activity-icon" onclick="app.showView('new')" data-view="new" title="Nuevo Proyecto">
                <i data-lucide="file-plus-2"></i>
            </button>
            <button class="activity-icon" onclick="app.openProject()" title="Abrir Proyecto">
                <i data-lucide="folder-open"></i>
            </button>
            <button class="activity-icon" onclick="app.showView('extensions')" data-view="extensions" title="Extensiones">
                <i data-lucide="puzzle"></i>
            </button>
            <button class="activity-icon" onclick="app.showView('sdk-reference')" data-view="sdk-reference" title="SDK Reference">
                <i data-lucide="book-open"></i>
            </button>
        </div>
        <div class="activity-bar-bottom">
            <button class="activity-icon" onclick="app.showView('settings')" data-view="settings" title="Configuraci√≥n">
                <i data-lucide="settings"></i>
            </button>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="main-content">

        <!-- Top Bar -->
        <header class="top-bar">
            <div class="breadcrumb">
                <span id="breadcrumb-text">DEX STUDIO</span>
            </div>

            <div class="top-bar-actions">
                <div class="search-box">
                    <i data-lucide="search"></i>
                    <input type="text" placeholder="Buscar‚Ä¶" class="search-input">
                </div>

                <div class="action-buttons">
                    <button class="action-btn" id="run-btn" onclick="app.runProject()">
                        <i data-lucide="play" id="run-btn-icon"></i>
                        <span id="run-btn-text">Ejecutar</span>
                    </button>
                    <button class="action-btn" id="core-btn-compile" onclick="app.compileProject()">
                        <i data-lucide="package" id="core-btn-compile-icon"></i>
                        <span id="core-btn-compile-label">Compilar</span>
                    </button>
                    <button class="action-btn" id="core-btn-terminal" onclick="app.toggleConsole()">
                        <i id="core-btn-terminal-icon" data-lucide="terminal"></i>
                        <span id="console-label">Terminal</span>
                    </button>
                </div>

                <div class="topbar-menu-wrap">
                    <button class="action-btn" onclick="app.toggleTopbarMenu()" title="Men√∫">
                        <i data-lucide="menu"></i>
                    </button>
                    <div id="topbar-dropdown" class="topbar-dropdown" style="display:none">
                        <div class="topbar-dd-title">Centro de Control</div>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();app.showGitMenu()">
                            <i data-lucide="git-branch"></i>
                            <span class="topbar-dd-text"><strong>Git y Herramientas</strong><small>Estado del repo y acciones r√°pidas</small></span>
                        </button>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();app.toggleThemeMenu()">
                            <i data-lucide="sun-moon"></i>
                            <span class="topbar-dd-text"><strong>Cambiar Tema</strong><small>Alternar entre temas integrados</small></span>
                        </button>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();app.showHelp()">
                            <i data-lucide="circle-help"></i>
                            <span class="topbar-dd-text"><strong>Ayuda</strong><small>Gu√≠a r√°pida y referencia</small></span>
                        </button>
                        <div class="topbar-dd-sep"></div>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();location.reload()">
                            <i data-lucide="refresh-cw"></i>
                            <span class="topbar-dd-text"><strong>Recargar Interfaz</strong><small>Refresca la UI sin cerrar la app</small></span>
                        </button>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();app.exportProjectInfo()">
                            <i data-lucide="file-text"></i>
                            <span class="topbar-dd-text"><strong>Info del Proyecto</strong><small>Exporta metadata del proyecto actual</small></span>
                        </button>
                        <button class="topbar-dd-item" onclick="app.closeTopbarMenu();app.toggleDevTools()">
                            <i data-lucide="bug"></i>
                            <span class="topbar-dd-text"><strong>Dev Tools</strong><small>Inspecci√≥n y diagn√≥stico</small></span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content-area">

            <!-- ‚îÄ‚îÄ View: Inicio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-home" class="view-section active">
                <div class="view-container home-container">
                    <div class="home-hero">
                        <div class="home-logo">
                            <img src="assets/logo.png" alt="DEX STUDIO" style="width:40px;height:40px;border-radius:8px;object-fit:contain">
                        </div>
                        <h1 class="home-title">DEX STUDIO</h1>
                        <p class="home-subtitle">Creador de Aplicaciones para Linux</p>
                    </div>

                    <div class="home-actions">
                        <button class="home-action-card" onclick="app.showView('new')">
                            <div class="home-action-icon" style="background: linear-gradient(135deg, #0a84ff, #5e5ce6)">
                                <i data-lucide="file-plus"></i>
                            </div>
                            <div class="home-action-info">
                                <h3>Nuevo Proyecto</h3>
                                <p>Crea una app desde plantilla o desde cero</p>
                            </div>
                            <i data-lucide="chevron-right" class="home-action-arrow"></i>
                        </button>
                        <button class="home-action-card" onclick="app.openProject()">
                            <div class="home-action-icon" style="background: linear-gradient(135deg, #30d158, #34c759)">
                                <i data-lucide="folder-open"></i>
                            </div>
                            <div class="home-action-info">
                                <h3>Abrir Proyecto</h3>
                                <p>Contin√∫a trabajando en un proyecto existente</p>
                            </div>
                            <i data-lucide="chevron-right" class="home-action-arrow"></i>
                        </button>
                        <button class="home-action-card" onclick="app.showView('extensions')">
                            <div class="home-action-icon" style="background: linear-gradient(135deg, #bf5fff, #7c3aed)">
                                <i data-lucide="puzzle"></i>
                            </div>
                            <div class="home-action-info">
                                <h3>Extensiones</h3>
                                <p>Descarga e instala extensiones del marketplace</p>
                            </div>
                            <i data-lucide="chevron-right" class="home-action-arrow"></i>
                        </button>
                    </div>

                    <div class="home-section">
                        <h3 class="home-section-title">
                            <i data-lucide="clock"></i> Proyectos Recientes
                        </h3>
                        <div id="home-recent-projects" class="home-recent-list">
                            <p class="empty-state">No hay proyectos recientes</p>
                        </div>
                    </div>

                    <div class="home-section">
                        <h3 class="home-section-title">
                            <i data-lucide="keyboard"></i> Atajos R√°pidos
                        </h3>
                        <div class="home-shortcuts">
                            <div class="home-shortcut"><kbd>Ctrl+S</kbd> Guardar</div>
                            <div class="home-shortcut"><kbd>Ctrl+N</kbd> Nuevo archivo</div>
                            <div class="home-shortcut"><kbd>Ctrl+B</kbd> Terminal</div>
                            <div class="home-shortcut"><kbd>Ctrl+W</kbd> Cerrar pesta√±a</div>
                            <div class="home-shortcut"><kbd>Ctrl+Shift+P</kbd> Paleta de Comandos</div>
                            <div class="home-shortcut"><kbd>Ctrl+F</kbd> Buscar</div>
                            <div class="home-shortcut"><kbd>Ctrl+D</kbd> Seleccionar siguiente</div>
                        </div>
                    </div>

                    <p class="home-footer-text">DEX STUDIO v1.0.3 ‚Äî Creador de Aplicaciones para Linux</p>
                </div>
            </section>

            <!-- ‚îÄ‚îÄ View: Nuevo Proyecto ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-new" class="view-section">
                <div class="view-container">

                    <div class="new-project-hero">
                        <div class="hero-icon">
                            <i data-lucide="rocket"></i>
                        </div>
                        <h2>Nuevo Proyecto</h2>
                        <p>Elige una plantilla y configura tu proyecto</p>
                    </div>

                    <!-- Template Selector -->
                    <div class="template-selector">
                        <div class="template-card selected" data-template="GUI" onclick="app.selectTemplate('GUI')">
                            <div class="template-icon" style="background: linear-gradient(135deg, #0a84ff, #5e5ce6)">
                                <i data-lucide="monitor"></i>
                            </div>
                            <h4>GUI</h4>
                            <p>Interfaz Gr√°fica</p>
                        </div>
                        <div class="template-card" data-template="CLI" onclick="app.selectTemplate('CLI')">
                            <div class="template-icon" style="background: linear-gradient(135deg, #30d158, #34c759)">
                                <i data-lucide="terminal"></i>
                            </div>
                            <h4>CLI</h4>
                            <p>L√≠nea de Comandos</p>
                        </div>
                        <div class="template-card" data-template="Web" onclick="app.selectTemplate('Web')">
                            <div class="template-icon" style="background: linear-gradient(135deg, #ff9f0a, #ff6723)">
                                <i data-lucide="globe"></i>
                            </div>
                            <h4>Web</h4>
                            <p>Servidor HTTP</p>
                        </div>
                        <div class="template-card" data-template="Extension" onclick="app.selectTemplate('Extension')">
                            <div class="template-icon" style="background: linear-gradient(135deg, #bf5fff, #7c3aed)">
                                <i data-lucide="puzzle"></i>
                            </div>
                            <h4>Extensi√≥n</h4>
                            <p>Plugin para DEX</p>
                        </div>
                        <div class="template-card" data-template="Blank" onclick="app.selectTemplate('Blank')">
                            <div class="template-icon" style="background: linear-gradient(135deg, #636366, #48484a)">
                                <i data-lucide="file"></i>
                            </div>
                            <h4>En Blanco</h4>
                            <p>Proyecto vac√≠o</p>
                        </div>
                    </div>

                    <!-- Form -->
                    <div class="form-container">

                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i data-lucide="info"></i>
                                Informaci√≥n B√°sica
                            </h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="p-name">Nombre del Proyecto</label>
                                    <input type="text" id="p-name" placeholder="Mi App Linux" class="form-input">
                                </div>
                                <div class="form-group" id="fg-identifier">
                                    <label for="p-id">Identificador</label>
                                    <input type="text" id="p-id" placeholder="com.creador.app" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="p-creator">Creador</label>
                                    <input type="text" id="p-creator" placeholder="Nombre o Empresa" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="p-version">Versi√≥n</label>
                                    <input type="text" id="p-version" value="1.0.0" class="form-input">
                                </div>
                            </div>
                        </div>

                        <div class="form-section" id="fs-config">
                            <h3 class="form-section-title">
                                <i data-lucide="settings-2"></i>
                                Configuraci√≥n
                            </h3>
                            <div class="form-grid">
                                <div class="form-group" id="fg-category">
                                    <label for="p-category">Categor√≠a</label>
                                    <select id="p-category" class="form-input">
                                        <option value="Utility">Utilidad</option>
                                        <option value="Development">Desarrollo</option>
                                        <option value="Game">Juego</option>
                                        <option value="Graphics">Gr√°ficos</option>
                                        <option value="Network">Red</option>
                                        <option value="Office">Oficina</option>
                                        <option value="Science">Ciencia</option>
                                        <option value="System">Sistema</option>
                                    </select>
                                </div>
                                <div class="form-group" id="fg-ext-category" style="display:none">
                                    <label for="p-ext-category">Tipo de Extensi√≥n</label>
                                    <select id="p-ext-category" class="form-input" onchange="app.onExtensionCategoryChange()">
                                        <option value="editor">üìù Editor</option>
                                        <option value="theme">üé® Tema Normal (Colores/estilo)</option>
                                        <option value="tools">üîß Herramientas</option>
                                        <option value="language">üí¨ Lenguaje</option>
                                        <option value="productivity">‚ö° Productividad</option>
                                        <option value="ui-theme">üñåÔ∏è UI Layout (Estructura - Beta)</option>
                                        <option value="debug">üêõ Depuraci√≥n</option>
                                    </select>
                                    <small id="ext-category-help" class="ext-ui-builder-help">Tema Normal: recolorea la app y estilos visuales. UI Layout: cambia estructura/forma y est√° en beta.</small>
                                </div>
                                <div class="form-group" id="fg-ext-icon" style="display:none">
                                    <label for="p-ext-icon">√çcono Lucide</label>
                                    <input type="text" id="p-ext-icon" placeholder="puzzle, palette, zap, code..." class="form-input" oninput="app.updateExtensionVisualPreview()">
                                    <small style="color:var(--text-secondary);font-size:11px">Ver cat√°logo en <a href="https://lucide.dev/icons" style="color:var(--accent)" onclick="event.preventDefault();window.pywebview&&window.pywebview.api.open_url?window.pywebview.api.open_url('https://lucide.dev/icons'):0">lucide.dev/icons</a></small>
                                </div>
                                <div class="form-group" id="fg-ext-color" style="display:none">
                                    <label for="p-ext-color">Color del Marketplace</label>
                                    <input type="text" id="p-ext-color" placeholder="linear-gradient(135deg, #667eea, #764ba2)" class="form-input" oninput="app.updateExtensionVisualPreview()">
                                    <div class="ext-visual-presets">
                                        <button type="button" class="ext-preset-btn" onclick="app.applyExtVisualPreset('forest')">Forest</button>
                                        <button type="button" class="ext-preset-btn" onclick="app.applyExtVisualPreset('ocean')">Ocean</button>
                                        <button type="button" class="ext-preset-btn" onclick="app.applyExtVisualPreset('sunset')">Sunset</button>
                                        <button type="button" class="ext-preset-btn" onclick="app.applyExtVisualPreset('mono')">Mono</button>
                                    </div>
                                    <div id="ext-visual-preview" class="ext-visual-preview">
                                        <div id="ext-visual-preview-swatch" class="ext-visual-swatch"></div>
                                        <div class="ext-visual-meta">
                                            <strong>Preview Marketplace</strong>
                                            <span><i data-lucide="puzzle" id="ext-visual-preview-icon"></i> <span id="ext-visual-preview-icon-name">puzzle</span></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" id="fg-license">
                                    <label for="p-license">Licencia</label>
                                    <input type="text" id="p-license" value="MIT" class="form-input">
                                </div>
                                <div class="form-group" id="fg-icon">
                                    <label for="p-icon">Icono Personalizado</label>
                                    <input type="text" id="p-icon" placeholder="/ruta/al/icono.png" class="form-input">
                                </div>
                            </div>
                        </div>

                        <!-- Hidden select that stores the actual type value -->
                        <input type="hidden" id="p-type" value="GUI">

                        <div class="form-section">
                            <h3 class="form-section-title">
                                <i data-lucide="file-text"></i>
                                Descripci√≥n
                            </h3>
                            <div class="form-group full-width">
                                <textarea id="p-desc" rows="3"
                                    placeholder="Breve descripci√≥n de la aplicaci√≥n‚Ä¶"
                                    class="form-input"></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn-primary btn-lg" onclick="app.createProject()">
                                <i data-lucide="rocket"></i>
                                Crear Proyecto
                            </button>
                            <button class="btn-secondary" onclick="app.resetForm()">
                                <i data-lucide="rotate-ccw"></i>
                                Limpiar
                            </button>
                        </div>

                    </div>
                </div>
            </section>

            <!-- ‚îÄ‚îÄ View: Editor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-editor" class="view-section">
                <div class="file-explorer-panel">
                    <div class="explorer-header">
                        <h3>Explorador</h3>
                        <div class="explorer-actions">
                            <button onclick="app.createFileInFolder(app.currentProjectPath)" title="Nuevo archivo">
                                <i data-lucide="file-plus"></i>
                            </button>
                            <button onclick="app.createFolderInFolder(app.currentProjectPath)" title="Nueva carpeta">
                                <i data-lucide="folder-plus"></i>
                            </button>
                            <button onclick="app.refreshExplorer()" title="Actualizar">
                                <i data-lucide="refresh-cw"></i>
                            </button>
                        </div>
                    </div>
                    <ul id="file-list" class="file-tree"></ul>
                </div>

                <div class="editor-container">
                    <div class="editor-tabs" id="editor-tabs"></div>
                    <div class="editor-header">
                        <span id="current-file" class="file-info">Ning√∫n archivo abierto</span>
                        <div class="editor-actions">
                            <span id="ext-buttons"></span>
                            <span class="ln-col-indicator" id="ln-col-indicator">Ln 1, Col 1</span>
                            <button onclick="app.saveFile()" class="btn-small" title="Guardar (Ctrl+S)">
                                <i data-lucide="save"></i> Guardar
                            </button>
                        </div>
                    </div>
                    <div class="editor-wrapper">
                        <div id="search-replace-panel" class="search-replace-panel" style="display:none">
                            <div class="sr-row">
                                <input type="text" id="sr-search-input" placeholder="Buscar..." autocomplete="off">
                                <span class="sr-count" id="sr-count">0/0</span>
                                <button class="sr-btn" onclick="app.searchPrev()" title="Anterior">‚ñ≤</button>
                                <button class="sr-btn" onclick="app.searchNext()" title="Siguiente">‚ñº</button>
                                <button class="sr-btn" onclick="app.hideSearchReplace()" title="Cerrar">‚úï</button>
                            </div>
                            <div class="sr-row" id="sr-replace-row">
                                <input type="text" id="sr-replace-input" placeholder="Reemplazar..." autocomplete="off">
                                <button class="sr-btn" onclick="app.replaceOne()">Uno</button>
                                <button class="sr-btn" onclick="app.replaceAll()">Todos</button>
                            </div>
                        </div>
                        <pre id="code-highlight" class="code-highlight" aria-hidden="true"></pre>
                        <textarea id="code-editor" spellcheck="false" class="code-editor"
                            placeholder="Abre un archivo del explorador para comenzar a editar..."></textarea>
                        <div id="image-viewer-panel" class="image-viewer-panel" style="display:none">
                            <div class="image-viewer-content">
                                <img id="image-viewer-img" src="" alt="Preview">
                                <p id="image-viewer-name" class="image-viewer-name"></p>
                            </div>
                        </div>
                        <div id="preview-panel" class="preview-panel" style="display:none">
                            <iframe id="preview-iframe" class="preview-iframe"
                                sandbox="allow-scripts allow-same-origin"></iframe>
                        </div>
                        <div class="minimap-container" id="minimap-container" onclick="app.minimapClick(event)">
                            <canvas class="minimap-canvas" id="minimap-canvas"></canvas>
                            <div class="minimap-viewport" id="minimap-viewport"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ‚îÄ‚îÄ View: Configuraci√≥n (VS Code Style) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-settings" class="view-section">
                <div class="settings-v2">
                    <!-- Settings Sidebar -->
                    <div class="settings-v2-sidebar">
                        <div class="settings-v2-sidebar-header">
                            <i data-lucide="sliders-horizontal"></i>
                            <span>Configuraci√≥n</span>
                        </div>
                        <button class="settings-v2-nav active" data-settings-cat="appearance" onclick="app.switchSettingsCat('appearance')">
                            <i data-lucide="palette"></i> Apariencia
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="editor" onclick="app.switchSettingsCat('editor')">
                            <i data-lucide="type"></i> Editor
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="terminal" onclick="app.switchSettingsCat('terminal')">
                            <i data-lucide="terminal"></i> Terminal
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="themes" onclick="app.switchSettingsCat('themes')">
                            <i data-lucide="paintbrush"></i> Temas UI
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="performance" onclick="app.switchSettingsCat('performance')">
                            <i data-lucide="zap"></i> Rendimiento
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="keybindings" onclick="app.switchSettingsCat('keybindings')">
                            <i data-lucide="keyboard"></i> Atajos
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="about" onclick="app.switchSettingsCat('about')">
                            <i data-lucide="info"></i> Acerca de
                        </button>
                        <button class="settings-v2-nav" data-settings-cat="developer" onclick="app.switchSettingsCat('developer')">
                            <i data-lucide="code-2"></i> Developer
                        </button>
                    </div>

                    <!-- Settings Content -->
                    <div class="settings-v2-content">
                        <!-- Appearance -->
                        <div class="settings-v2-panel active" id="settings-panel-appearance">
                            <h2 class="settings-v2-title">Apariencia</h2>
                            <p class="settings-v2-desc">Personaliza la apariencia visual de DEX STUDIO</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Tema Normal</strong>
                                        <span>Temas predeterminados de color/estilo para toda la app</span>
                                    </div>
                                    <select id="ui-theme" onchange="app.changeUITheme(this.value)" class="form-input" style="width:160px">
                                        <option value="dark">Dark</option>
                                        <option value="light">Light</option>
                                        <option value="cyberpunk">Cyberpunk</option>
                                    </select>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Tema del Editor</strong>
                                        <span>Colores del resaltado de sintaxis</span>
                                    </div>
                                    <select id="editor-theme" onchange="app.changeEditorTheme(this.value)" class="form-input" style="width:160px">
                                        <option value="dark">Oscuro</option>
                                        <option value="light">Claro</option>
                                        <option value="dracula">Dracula</option>
                                        <option value="nord">Nord</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Editor -->
                        <div class="settings-v2-panel" id="settings-panel-editor">
                            <h2 class="settings-v2-title">Editor</h2>
                            <p class="settings-v2-desc">Configuraci√≥n del editor de c√≥digo</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Tama√±o de Fuente</strong>
                                        <span>Tama√±o del texto en el editor</span>
                                    </div>
                                    <select id="font-size" onchange="app.changeFontSize(this.value)" class="form-input" style="width:120px">
                                        <option value="11">11px</option>
                                        <option value="12">12px</option>
                                        <option value="13" selected>13px</option>
                                        <option value="14">14px</option>
                                        <option value="15">15px</option>
                                        <option value="16">16px</option>
                                        <option value="18">18px</option>
                                        <option value="20">20px</option>
                                    </select>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Familia de Fuente</strong>
                                        <span>Tipograf√≠a del editor de c√≥digo</span>
                                    </div>
                                    <select id="font-family" onchange="app.changeFontFamily(this.value)" class="form-input" style="width:180px">
                                        <option value="'Fira Code', monospace">Fira Code</option>
                                        <option value="'Courier New', monospace">Courier New</option>
                                        <option value="'Monaco', monospace">Monaco</option>
                                        <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                                        <option value="monospace">Monospace (Sistema)</option>
                                    </select>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Tab Size</strong>
                                        <span>Espacios por tabulaci√≥n</span>
                                    </div>
                                    <select id="tab-size" onchange="app.changeTabSize(this.value)" class="form-input" style="width:100px">
                                        <option value="2">2 espacios</option>
                                        <option value="4" selected>4 espacios</option>
                                        <option value="8">8 espacios</option>
                                    </select>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Word Wrap</strong>
                                        <span>Ajuste de l√≠nea autom√°tico</span>
                                    </div>
                                    <input type="checkbox" id="word-wrap-toggle" onchange="app.toggleWordWrap()" checked>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Minimap</strong>
                                        <span>Mostrar minimapa lateral</span>
                                    </div>
                                    <input type="checkbox" id="minimap-toggle" onchange="app.toggleMinimap()" checked>
                                </div>
                            </div>
                        </div>

                        <!-- Terminal -->
                        <div class="settings-v2-panel" id="settings-panel-terminal">
                            <h2 class="settings-v2-title">Terminal</h2>
                            <p class="settings-v2-desc">Configuraci√≥n de la terminal integrada</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Historial m√°ximo</strong>
                                        <span>Cantidad de comandos a recordar</span>
                                    </div>
                                    <select id="cmd-history-limit" onchange="app.cmdHistoryLimit=parseInt(this.value)" class="form-input" style="width:140px">
                                        <option value="25">25 comandos</option>
                                        <option value="50" selected>50 comandos</option>
                                        <option value="100">100 comandos</option>
                                        <option value="200">200 comandos</option>
                                    </select>
                                </div>
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Terminal visible al inicio</strong>
                                        <span>Mostrar la terminal al abrir DEX Studio</span>
                                    </div>
                                    <input type="checkbox" id="terminal-visible-toggle" checked>
                                </div>
                            </div>
                        </div>

                        <!-- UI Themes -->
                        <div class="settings-v2-panel" id="settings-panel-themes">
                            <h2 class="settings-v2-title">UI Layout (Beta)</h2>
                            <p class="settings-v2-desc">Esta secci√≥n es solo para extensiones de estructura/layout de interfaz (no para temas normales).</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-warning-box">
                                    <i data-lucide="cone"></i>
                                    <div>
                                        <strong>Fuera de servicio temporal (Beta)</strong>
                                        <p>El bot√≥n <code>Aplicar</code> est√° desactivado mientras se estabiliza UI Layout. Para colores/estilo usa <strong>Tema Normal</strong> en Apariencia.</p>
                                    </div>
                                </div>
                                <div class="settings-v2-info-box">
                                    <i data-lucide="paintbrush"></i>
                                    <div>
                                        <strong>Nota de categor√≠as</strong>
                                        <p><code>theme</code> = tema normal (colores). <code>ui-theme</code> = layout/estructura (beta). Estamos enfocando desarrollo en <code>theme</code>.</p>
                                    </div>
                                </div>
                                <div id="ui-themes-list" class="settings-v2-themes-list">
                                    <p class="empty-state">No hay temas de interfaz instalados. Descarga uno desde el Marketplace o crea el tuyo.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Performance -->
                        <div class="settings-v2-panel" id="settings-panel-performance">
                            <h2 class="settings-v2-title">Rendimiento</h2>
                            <p class="settings-v2-desc">Optimiza DEX Studio para tu hardware</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-row">
                                    <div class="settings-v2-label">
                                        <strong>Modo Rendimiento (Lite)</strong>
                                        <span>Desactiva animaciones, blur, transparencias y syntax highlighting para m√°xima velocidad</span>
                                    </div>
                                    <input type="checkbox" id="lite-mode-toggle" onchange="app.toggleLiteMode()">
                                </div>
                            </div>
                        </div>

                        <!-- Keybindings -->
                        <div class="settings-v2-panel" id="settings-panel-keybindings">
                            <h2 class="settings-v2-title">Atajos de Teclado</h2>
                            <p class="settings-v2-desc">Referencia r√°pida de atajos disponibles</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-keybind"><kbd>Ctrl+S</kbd><span>Guardar archivo</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+N</kbd><span>Nuevo archivo</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+W</kbd><span>Cerrar pesta√±a activa</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+B</kbd><span>Toggle terminal</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+`</kbd><span>Focus en terminal</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+F</kbd><span>Buscar en archivo</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+H</kbd><span>Buscar y Reemplazar</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+D</kbd><span>Seleccionar siguiente ocurrencia</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+Shift+P</kbd><span>Paleta de Comandos</span></div>
                                <div class="settings-v2-keybind"><kbd>Ctrl+Shift+D</kbd><span>SDK Reference</span></div>
                                <div class="settings-v2-keybind"><kbd>Tab</kbd><span>Insertar tabulaci√≥n / Expandir snippet</span></div>
                                <div class="settings-v2-keybind"><kbd>Esc</kbd><span>Cerrar modal / panel</span></div>
                            </div>
                        </div>

                        <!-- About -->
                        <div class="settings-v2-panel" id="settings-panel-about">
                            <h2 class="settings-v2-title">Acerca de DEX STUDIO</h2>
                            <p class="settings-v2-desc">Informaci√≥n del editor</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-about-card">
                                    <img src="assets/logo.png" alt="DEX STUDIO" style="width:48px;height:48px;border-radius:12px;object-fit:contain">
                                    <div>
                                        <h3>DEX STUDIO v1.0.3</h3>
                                        <p>Creador de Aplicaciones para Linux</p>
                                        <p style="font-size:11px;color:var(--text-tertiary);margin-top:6px">Motor: PyWebView + Python 3 | Frontend: HTML/CSS/JS</p>
                                        <p style="font-size:11px;color:var(--text-tertiary)">Lenguajes soportados: Python, JavaScript, TypeScript, HTML, CSS, JSON, Bash, C, C++, Rust, SQL, Markdown, YAML, TOML, Java, Go, PHP, Ruby, Lua</p>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-v2-group">
                                <h3 style="font-size:13px;font-weight:700;margin-bottom:8px">Novedades y parches recientes</h3>
                                <div class="settings-v2-info-box">
                                    <i data-lucide="sparkles"></i>
                                    <div>
                                        <strong>Resumen de versi√≥n</strong>
                                        <p>Correcciones de estabilidad, mejoras del Marketplace y nueva API de UI para extensiones.</p>
                                    </div>
                                </div>
                                <ul style="margin:10px 0 0 18px;color:var(--text-secondary);font-size:12px;line-height:1.5">
                                    <li>Persistencia real de configuraci√≥n: estado de terminal, minimap, word-wrap, tama√±o de tab y l√≠mite de historial.</li>
                                    <li>Nueva API <code>DEX.ui</code> para sobrescribir botones nativos del editor sin usar temas de interfaz.</li>
                                    <li>Nueva secci√≥n <strong>Developer</strong> con cat√°logo de IDs de botones y targets de UI.</li>
                                    <li>Marketplace detecta extensiones con repositorio no disponible y las oculta tras periodo de gracia.</li>
                                    <li>Mejoras de publicaci√≥n/instalaci√≥n para temas: soporte consistente de <code>theme.css</code>.</li>
                                    <li>Correcci√≥n de regresi√≥n en bot√≥n principal de Ejecutar/Probar al aplicar overrides.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Developer -->
                        <div class="settings-v2-panel" id="settings-panel-developer">
                            <h2 class="settings-v2-title">Developer</h2>
                            <p class="settings-v2-desc">Cat√°logo de IDs/targets de UI para extensiones sin tocar el c√≥digo fuente</p>

                            <div class="settings-v2-group">
                                <div class="settings-v2-info-box">
                                    <i data-lucide="wrench"></i>
                                    <div>
                                        <strong>UI API</strong>
                                        <p>Usa <code>DEX.ui.overrideButton(id, config)</code>, <code>DEX.ui.clearButton(id)</code> y <code>DEX.ui.listButtons()</code>.</p>
                                    </div>
                                </div>
                                <div style="display:flex;gap:8px;margin-top:10px">
                                    <button class="btn-secondary btn-sm" onclick="app.renderDeveloperUICatalog()">
                                        <i data-lucide="refresh-cw"></i> Refrescar cat√°logo
                                    </button>
                                    <button class="btn-primary btn-sm" onclick="app.copyDeveloperUICatalog()">
                                        <i data-lucide="copy"></i> Copiar cat√°logo
                                    </button>
                                </div>
                                <pre id="developer-ui-catalog" class="sdk-code" style="max-height:360px;overflow:auto;white-space:pre-wrap;margin-top:10px"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ‚îÄ‚îÄ View: Extensiones (VS Code Style) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-extensions" class="view-section">
                <div class="ext-v2-container">
                    <!-- Barra de b√∫squeda global -->
                    <div class="ext-v2-searchbar">
                        <i data-lucide="search" class="ext-v2-search-icon"></i>
                        <input type="text" id="ext-v2-search" class="form-input" placeholder="Buscar extensiones en Marketplace o Instaladas...">
                    </div>

                    <!-- Tabs: Instaladas / Marketplace -->
                    <div class="ext-v2-tabs">
                        <button class="ext-v2-tab active" data-tab="installed" onclick="app.switchExtTab('installed')">
                            <i data-lucide="check-circle" style="width:14px;height:14px"></i>
                            Instaladas
                            <span class="ext-v2-tab-count" id="ext-v2-installed-count">0</span>
                        </button>
                        <button class="ext-v2-tab" data-tab="marketplace" onclick="app.switchExtTab('marketplace')">
                            <i data-lucide="store" style="width:14px;height:14px"></i>
                            Marketplace
                        </button>
                    </div>

                    <!-- Panel: Instaladas -->
                    <div class="ext-v2-panel active" id="ext-v2-panel-installed">
                        <div id="installed-extensions" class="ext-v2-list">
                            <div class="ext-v2-empty">
                                <i data-lucide="puzzle" style="width:32px;height:32px;color:var(--text-tertiary)"></i>
                                <p>No hay extensiones instaladas</p>
                            </div>
                        </div>
                    </div>

                    <!-- Panel: Marketplace -->
                    <div class="ext-v2-panel" id="ext-v2-panel-marketplace">
                        <div id="available-extensions" class="ext-v2-list">
                            <div class="ext-v2-empty">
                                <i data-lucide="globe" style="width:32px;height:32px;color:var(--text-tertiary)"></i>
                                <p>Haz click en <strong>Marketplace</strong> para cargar extensiones de la comunidad</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ‚îÄ‚îÄ View: SDK Reference ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section id="view-sdk-reference" class="view-section">
                <div class="sdk-ref-container">
                    <div class="sdk-ref-sidebar">
                        <div class="sdk-ref-header">
                            <i data-lucide="book-open"></i>
                            <span>SDK Reference</span>
                        </div>
                        <button class="sdk-ref-nav active" data-sdk-cat="overview" onclick="app.switchSdkCat('overview')">Visi√≥n General</button>
                        <button class="sdk-ref-nav" data-sdk-cat="filesystem" onclick="app.switchSdkCat('filesystem')">üìÅ File System</button>
                        <button class="sdk-ref-nav" data-sdk-cat="editor" onclick="app.switchSdkCat('editor')">‚úèÔ∏è Editor</button>
                        <button class="sdk-ref-nav" data-sdk-cat="ui" onclick="app.switchSdkCat('ui')">üé® UI</button>
                        <button class="sdk-ref-nav" data-sdk-cat="dialog" onclick="app.switchSdkCat('dialog')">üí¨ Dialog</button>
                        <button class="sdk-ref-nav" data-sdk-cat="events" onclick="app.switchSdkCat('events')">‚ö° Events</button>
                        <button class="sdk-ref-nav" data-sdk-cat="shell" onclick="app.switchSdkCat('shell')">üñ•Ô∏è Shell</button>
                        <button class="sdk-ref-nav" data-sdk-cat="storage" onclick="app.switchSdkCat('storage')">üíæ Storage</button>
                        <button class="sdk-ref-nav" data-sdk-cat="http" onclick="app.switchSdkCat('http')">üåê HTTP</button>
                        <button class="sdk-ref-nav" data-sdk-cat="project" onclick="app.switchSdkCat('project')">üì¶ Project</button>
                        <button class="sdk-ref-nav" data-sdk-cat="themes" onclick="app.switchSdkCat('themes')">üé≠ Themes</button>
                    </div>
                    <div class="sdk-ref-content" id="sdk-ref-content">
                        <div class="sdk-ref-panel active" id="sdk-panel-overview">
                            <h2>DEX STUDIO SDK</h2>
                            <p>El SDK de DEX STUDIO te permite crear extensiones potentes que interact√∫an con el editor, el sistema de archivos y la interfaz.</p>
                            <h3>Inicio R√°pido</h3>
                            <pre class="sdk-code">DEX.registerExtension({
    id: 'mi-extension',
    name: 'Mi Extensi√≥n',
    version: '1.0.0',
    description: 'Descripci√≥n'
}, {
    onInit: function() {
        DEX.log('Extensi√≥n cargada!');
    }
});
// Dex code successful</pre>
                            <h3>Estructura del Manifest</h3>
                            <pre class="sdk-code">{
    "id": "mi-extension",
    "name": "Mi Extensi√≥n",
    "version": "1.0.0",
    "description": "...",
    "author": "Tu Nombre",
    "category": "editor|theme|ui|language",
    "icon": "nombre-lucide-icon",
    "color": "linear-gradient(135deg, #a, #b)"
}</pre>
                            <h3>Tipos de Extensi√≥n</h3>
                            <div class="sdk-type-grid">
                                <div class="sdk-type-card"><strong>editor</strong><p>Modifica el comportamiento del editor, a√±ade botones, autocompletado</p></div>
                                <div class="sdk-type-card"><strong>theme</strong><p>Define temas de interfaz con CSS personalizado</p></div>
                                <div class="sdk-type-card"><strong>ui</strong><p>Crea paneles, sidebars y elementos de interfaz</p></div>
                                <div class="sdk-type-card"><strong>language</strong><p>A√±ade soporte para nuevos lenguajes</p></div>
                            </div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-filesystem">
                            <h2>üìÅ File System API</h2>
                            <p>Acceso al sistema de archivos del proyecto.</p>
                            <div class="sdk-method"><h4>DEX.fs.readFile(path)</h4><p>Lee el contenido de un archivo. Retorna <code>{success, content}</code></p><pre class="sdk-code">const res = await DEX.fs.readFile('/ruta/archivo.txt');
if (res.success) console.log(res.content);</pre></div>
                            <div class="sdk-method"><h4>DEX.fs.writeFile(path, content)</h4><p>Escribe contenido en un archivo. Retorna <code>{success}</code></p><pre class="sdk-code">await DEX.fs.writeFile('/ruta/archivo.txt', 'contenido');</pre></div>
                            <div class="sdk-method"><h4>DEX.fs.listDir(path)</h4><p>Lista archivos de un directorio. Retorna <code>{success, items[]}</code></p><pre class="sdk-code">const res = await DEX.fs.listDir(DEX.getProjectPath());
res.items.forEach(item => console.log(item.name, item.is_dir));</pre></div>
                            <div class="sdk-method"><h4>DEX.fs.createFile(path)</h4><p>Crea un archivo vac√≠o.</p></div>
                            <div class="sdk-method"><h4>DEX.fs.createDir(path)</h4><p>Crea un directorio (y subdirectorios necesarios).</p></div>
                            <div class="sdk-method"><h4>DEX.fs.delete(path)</h4><p>Elimina un archivo o directorio.</p></div>
                            <div class="sdk-method"><h4>DEX.fs.rename(oldPath, newPath)</h4><p>Renombra un archivo o directorio.</p></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-editor">
                            <h2>‚úèÔ∏è Editor API</h2>
                            <p>Control del editor de c√≥digo.</p>
                            <div class="sdk-method"><h4>DEX.editor.getContent()</h4><p>Retorna el contenido actual del editor como string.</p></div>
                            <div class="sdk-method"><h4>DEX.editor.setContent(text)</h4><p>Reemplaza el contenido del editor.</p></div>
                            <div class="sdk-method"><h4>DEX.editor.getSelection()</h4><p>Retorna el texto seleccionado.</p></div>
                            <div class="sdk-method"><h4>DEX.editor.replaceSelection(text)</h4><p>Reemplaza la selecci√≥n actual con el texto dado.</p></div>
                            <div class="sdk-method"><h4>DEX.editor.insertAtCursor(text)</h4><p>Inserta texto en la posici√≥n del cursor.</p></div>
                            <div class="sdk-method"><h4>DEX.editor.getCursor()</h4><p>Retorna <code>{line, col}</code> de la posici√≥n actual.</p></div>
                            <div class="sdk-method"><h4>DEX.readCurrentFile()</h4><p>Retorna el contenido del archivo actual (o null).</p></div>
                            <div class="sdk-method"><h4>DEX.getCurrentFilePath()</h4><p>Retorna la ruta completa del archivo activo.</p></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-ui">
                            <h2>üé® UI API</h2>
                            <p>Crea elementos de interfaz personalizados y modifica botones nativos del editor.</p>
                            <div class="sdk-method"><h4>DEX.ui.showToast(message, type, duration)</h4><p>Muestra una notificaci√≥n. Tipos: 'success', 'error', 'info', 'warning'</p><pre class="sdk-code">DEX.ui.showToast('Archivo procesado!', 'success', 3000);</pre></div>
                            <div class="sdk-method"><h4>DEX.ui.createStatusBarItem(id, text)</h4><p>Crea un elemento en la barra de estado del editor.</p><pre class="sdk-code">DEX.ui.createStatusBarItem('word-count', 'Palabras: 0');</pre></div>
                            <div class="sdk-method"><h4>DEX.ui.updateStatusBarItem(id, text)</h4><p>Actualiza el texto de un elemento de la barra de estado.</p></div>
                            <div class="sdk-method"><h4>DEX.ui.removeStatusBarItem(id)</h4><p>Elimina un elemento de la barra de estado.</p></div>
                            <div class="sdk-method"><h4>DEX.ui.addContextMenuItem(label, icon, callback)</h4><p>A√±ade un item al men√∫ contextual del explorador.</p></div>
                            <div class="sdk-method"><h4>DEX.ui.overrideButton(id, config)</h4><p>Sobrescribe bot√≥n core del editor. √ötil para cambiar acci√≥n, texto, icono, tooltip o visibilidad.</p><pre class="sdk-code">DEX.ui.overrideButton('terminal', {
  label: 'Nueva Terminal',
  icon: 'terminal-square',
  title: 'Abrir terminal extendida',
  action: function() { app.createTerminal(); app.toggleConsole(true); }
});</pre></div>
                            <div class="sdk-method"><h4>DEX.ui.clearButton(id)</h4><p>Quita el override y restaura el comportamiento original del bot√≥n.</p><pre class="sdk-code">DEX.ui.clearButton('terminal');</pre></div>
                            <div class="sdk-method"><h4>DEX.ui.listButtons()</h4><p>Retorna cat√°logo de botones core disponibles (id, selector, iconSelector, labelSelector, descripci√≥n).</p><pre class="sdk-code">const buttons = DEX.ui.listButtons();
buttons.forEach(btn =&gt; console.log(btn.id, btn.selector));</pre></div>
                            <div class="sdk-method"><h4>IDs de botones core</h4><p>IDs soportados actualmente por la UI API:</p><pre class="sdk-code">run
compile
terminal
console-toggle</pre></div>
                            <div class="sdk-method"><h4>DEX.createPanel(id, html, options)</h4><p>Crea un panel personalizado. Opciones: {position: 'right', width: '350px'}</p><pre class="sdk-code">DEX.createPanel('mi-panel', '&lt;h3&gt;Panel&lt;/h3&gt;&lt;p&gt;Contenido&lt;/p&gt;', {position: 'right'});</pre></div>
                            <div class="sdk-method"><h4>DEX.removePanel(id)</h4><p>Elimina un panel personalizado.</p></div>
                            <div class="sdk-method"><h4>DEX.showSidebar(id, html)</h4><p>Muestra un sidebar a la derecha del editor.</p></div>
                            <div class="sdk-method"><h4>ui_buttons (manifest)</h4><p>Define botones en el toolbar del editor que aparecen con ciertos tipos de archivo.</p><pre class="sdk-code">// En el manifest.json:
"ui_buttons": [{
    "label": "Preview",
    "icon": "eye",
    "action": "preview",
    "fileTypes": [".html", ".md"]
}]</pre></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-dialog">
                            <h2>üí¨ Dialog API</h2>
                            <p>Di√°logos de interacci√≥n con el usuario.</p>
                            <div class="sdk-method"><h4>DEX.dialog.alert(message, title)</h4><p>Muestra un aviso (notificaci√≥n). Retorna Promise.</p></div>
                            <div class="sdk-method"><h4>DEX.dialog.confirm(message, title)</h4><p>Pide confirmaci√≥n. Retorna Promise&lt;boolean&gt;</p></div>
                            <div class="sdk-method"><h4>DEX.dialog.prompt(title, placeholder, defaultValue)</h4><p>Pide texto al usuario. Retorna Promise&lt;string|null&gt;</p><pre class="sdk-code">const nombre = await DEX.dialog.prompt('Nombre', 'Escribe tu nombre', 'User');
if (nombre) DEX.log('Hola ' + nombre);</pre></div>
                            <div class="sdk-method"><h4>DEX.dialog.select(title, options[])</h4><p>Muestra un selector de opciones. Retorna Promise&lt;string|null&gt;</p><pre class="sdk-code">const lang = await DEX.dialog.select('Idioma', ['Espa√±ol', 'English', 'Fran√ßais']);</pre></div>
                            <div class="sdk-method"><h4>DEX.showInputDialog(opts)</h4><p>Dialog personalizado con input. Opciones: {title, message, placeholder, defaultValue, type, okLabel}</p></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-events">
                            <h2>‚ö° Events API</h2>
                            <p>Escucha y emite eventos del editor.</p>
                            <div class="sdk-method"><h4>DEX.events.on(event, callback)</h4><p>Suscr√≠bete a un evento.</p></div>
                            <div class="sdk-method"><h4>DEX.events.off(event, callback)</h4><p>Desuscr√≠bete de un evento.</p></div>
                            <div class="sdk-method"><h4>DEX.events.emit(event, data)</h4><p>Emite un evento personalizado.</p></div>
                            <h3 style="margin-top:20px">Eventos Disponibles</h3>
                            <table class="sdk-table">
                                <tr><th>Evento</th><th>Datos</th><th>Descripci√≥n</th></tr>
                                <tr><td><code>fileOpen</code></td><td><code>string</code> (ruta)</td><td>Se dispara cuando se abre un archivo</td></tr>
                                <tr><td><code>fileSave</code></td><td><code>string</code> (ruta)</td><td>Se dispara al guardar un archivo</td></tr>
                                <tr><td><code>fileClose</code></td><td><code>string</code> (ruta)</td><td>Se dispara al cerrar una pesta√±a</td></tr>
                                <tr><td><code>projectOpen</code></td><td><code>{name, path}</code></td><td>Se dispara al abrir un proyecto</td></tr>
                            </table>
                            <h3 style="margin-top:20px">Callbacks en Handlers</h3>
                            <pre class="sdk-code">DEX.registerExtension(config, {
    onInit: function() { /* Al cargar la extensi√≥n */ },
    onFileOpen: function(path, ext) { /* Al abrir archivo, return true para manejar */ },
    onFileSave: function(path) { /* Al guardar */ },
    onFileClose: function(path) { /* Al cerrar pesta√±a */ },
    onProjectOpen: function(info) { /* Al abrir proyecto */ },
    onEditorInput: function(editor) { /* En cada tecla en el editor */ }
});</pre>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-shell">
                            <h2>üñ•Ô∏è Shell API</h2>
                            <p>Ejecutar comandos del sistema.</p>
                            <div class="sdk-method"><h4>DEX.shell.exec(command)</h4><p>Ejecuta un comando shell. Retorna <code>{success, stdout, stderr, code}</code></p><pre class="sdk-code">const res = await DEX.shell.exec('ls -la');
if (res.success) DEX.log(res.stdout);</pre></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-storage">
                            <h2>üíæ Storage API</h2>
                            <p>Almacenamiento persistente por extensi√≥n.</p>
                            <div class="sdk-method"><h4>DEX.storage.forExtension(extId)</h4><p>Retorna un objeto de storage espec√≠fico para la extensi√≥n.</p><pre class="sdk-code">const store = DEX.storage.forExtension('mi-extension');
await store.set('config', JSON.stringify({key: 'value'}));
const data = await store.get('config');</pre></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-http">
                            <h2>üåê HTTP API</h2>
                            <p>Hacer peticiones HTTP.</p>
                            <div class="sdk-method"><h4>DEX.http.fetch(url, options)</h4><p>Petici√≥n HTTP via curl. Opciones: {method, headers, body}</p><pre class="sdk-code">const res = await DEX.http.fetch('https://api.ejemplo.com/data', {
    method: 'GET',
    headers: {'Accept': 'application/json'}
});
if (res.success) console.log(JSON.parse(res.data));</pre></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-project">
                            <h2>üì¶ Project API</h2>
                            <p>Informaci√≥n del proyecto actual.</p>
                            <div class="sdk-method"><h4>DEX.project.getPath()</h4><p>Ruta del proyecto abierto.</p></div>
                            <div class="sdk-method"><h4>DEX.project.getName()</h4><p>Nombre del proyecto.</p></div>
                            <div class="sdk-method"><h4>DEX.project.getOpenFiles()</h4><p>Lista de archivos abiertos (pesta√±as).</p></div>
                            <div class="sdk-method"><h4>DEX.project.getCurrentFile()</h4><p>Ruta del archivo activo.</p></div>
                            <div class="sdk-method"><h4>DEX.project.getLanguage()</h4><p>Lenguaje detectado del archivo actual.</p></div>
                            <div class="sdk-method"><h4>DEX.project.isExtension()</h4><p>True si el proyecto es una extensi√≥n de DEX.</p></div>
                            <div class="sdk-method"><h4>DEX.project.getFiles(path?)</h4><p>Lista archivos del proyecto o una subruta.</p></div>
                        </div>
                        <div class="sdk-ref-panel" id="sdk-panel-themes">
                            <h2>üé≠ Creando Temas de Interfaz</h2>
                            <p>Los temas de interfaz permiten cambiar completamente la apariencia de DEX STUDIO.</p>
                            <h3>1. Estructura del tema</h3>
                            <pre class="sdk-code">mi-tema/
‚îú‚îÄ‚îÄ manifest.json    # category: "theme"
‚îú‚îÄ‚îÄ theme.css        # Variables CSS personalizadas
‚îú‚îÄ‚îÄ main.js          # Registro de la extensi√≥n
‚îî‚îÄ‚îÄ README.md        # Documentaci√≥n</pre>
                            <h3>2. manifest.json</h3>
                            <pre class="sdk-code">{
    "id": "mi-tema-oscuro",
    "name": "Mi Tema Oscuro",
    "version": "1.0.0",
    "category": "theme",
    "type": "ui-theme",
    "colors": {
        "bg-base": "#0d1117",
        "accent": "#58a6ff"
    }
}</pre>
                            <h3>3. theme.css ‚Äî Variables disponibles</h3>
                            <pre class="sdk-code">:root {
    --bg-base: #0d1117;
    --bg-surface: #161b22;
    --bg-elevated: #21262d;
    --bg-overlay: #30363d;
    --text-primary: rgba(255, 255, 255, 0.92);
    --text-secondary: rgba(255, 255, 255, 0.55);
    --text-tertiary: rgba(255, 255, 255, 0.28);
    --accent: #58a6ff;
    --accent-hover: #79c0ff;
    --accent-subtle: rgba(88, 166, 255, 0.12);
    --border: rgba(255, 255, 255, 0.08);
    --border-strong: rgba(255, 255, 255, 0.14);
    --success: #3fb950;
    --warning: #d29922;
    --error: #f85149;
}</pre>
                            <h3>4. main.js</h3>
                            <pre class="sdk-code">DEX.registerExtension({
    id: 'mi-tema-oscuro',
    name: 'Mi Tema Oscuro',
    version: '1.0.0',
    category: 'theme'
}, {
    onInit: function() {
        DEX.log('Tema disponible: Mi Tema Oscuro');
    }
});
// Dex code successful</pre>
                        </div>
                    </div>
                </div>
            </section>

        </div><!-- /content-area -->

        <!-- ‚îÄ‚îÄ Terminal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="bottom-panel" class="console-panel console-visible">
            <div class="console-header">
                <div class="terminal-tabs" id="terminal-tabs">
                    <button class="terminal-tab active" data-term="0">Terminal 1</button>
                    <button class="terminal-tab-add" onclick="app.addTerminal()" title="Nueva terminal">+</button>
                </div>
                <div class="console-controls">
                    <button onclick="app.copyLastLog()" title="Copiar" class="console-btn">
                        <i data-lucide="copy"></i>
                    </button>
                    <button onclick="app.clearTerminal()" title="Limpiar" class="console-btn">
                        <i data-lucide="trash-2"></i>
                    </button>
                    <button id="console-toggle" onclick="app.toggleConsole()" title="Cerrar" class="console-btn">
                        <i id="console-toggle-icon" data-lucide="chevron-down"></i>
                    </button>
                </div>
            </div>
            <pre id="terminal-out" class="console-output"></pre>
            <div class="terminal-input-row">
                <span class="terminal-prompt" id="terminal-prompt">~$</span>
                <input type="text" id="terminal-input" class="terminal-input"
                    placeholder="Escribe un comando‚Ä¶"
                    autocomplete="off" spellcheck="false">
            </div>
        </div>

    </div><!-- /main-content -->
</div><!-- /app-container -->

<!-- ‚îÄ‚îÄ Context Menu ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="context-menu" class="context-menu">
    <button class="context-item" onclick="app.createFileInFolder(app.contextPath)">
        <i data-lucide="file-plus"></i> Nuevo Archivo Aqu√≠
    </button>
    <button class="context-item" onclick="app.createFolderInFolder(app.contextPath)">
        <i data-lucide="folder-plus"></i> Nueva Carpeta Aqu√≠
    </button>
    <div class="context-separator"></div>
    <button class="context-item" onclick="app.renameFile(app.contextPath)">
        <i data-lucide="pencil"></i> Renombrar
    </button>
    <button class="context-item" onclick="app.duplicateItem(app.contextPath)">
        <i data-lucide="copy"></i> Duplicar
    </button>
    <button class="context-item" onclick="app.moveItemPrompt(app.contextPath)">
        <i data-lucide="move"></i> Mover a...
    </button>
    <div class="context-separator"></div>
    <button class="context-item context-danger" onclick="app.deleteFile(app.contextPath)">
        <i data-lucide="trash-2"></i> Eliminar
    </button>
</div>

<!-- ‚îÄ‚îÄ Modal: Ayuda ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="help-modal" class="modal-overlay" style="display:none">
    <div class="modal-card">
        <div class="modal-header">
            <h2>Ayuda ‚Äî DEX STUDIO</h2>
            <button class="modal-close" onclick="app.closeModal('help-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body">

            <div class="help-section">
                <h3>Atajos de Teclado</h3>
                <div class="shortcut-grid">
                    <div class="shortcut-item"><kbd>Ctrl S</kbd><span>Guardar</span></div>
                    <div class="shortcut-item"><kbd>Ctrl N</kbd><span>Nuevo archivo</span></div>
                    <div class="shortcut-item"><kbd>Ctrl B</kbd><span>Toggle terminal</span></div>
                    <div class="shortcut-item"><kbd>Ctrl W</kbd><span>Cerrar pesta√±a</span></div>
                    <div class="shortcut-item"><kbd>Ctrl `</kbd><span>Focus terminal</span></div>
                    <div class="shortcut-item"><kbd>Ctrl Shift P</kbd><span>Paleta de Comandos</span></div>
                    <div class="shortcut-item"><kbd>Ctrl F</kbd><span>Buscar</span></div>
                    <div class="shortcut-item"><kbd>Ctrl H</kbd><span>Buscar y Reemplazar</span></div>
                    <div class="shortcut-item"><kbd>Ctrl D</kbd><span>Siguiente ocurrencia</span></div>
                </div>
            </div>

            <div class="help-section">
                <h3>Primeros Pasos</h3>
                <ol class="help-steps">
                    <li>Crea un proyecto con nombre, ID e informaci√≥n b√°sica</li>
                    <li>Edita archivos desde el explorador lateral</li>
                    <li>Usa <strong>Ejecutar</strong> para probar la app</li>
                    <li>Usa <strong>Compilar</strong> para empaquetar como .deb</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>Estructura de Proyecto</h3>
                <pre class="help-code">proyecto/
‚îú‚îÄ‚îÄ main.py          # Punto de entrada
‚îú‚îÄ‚îÄ metadata.json    # Configuraci√≥n
‚îú‚îÄ‚îÄ config.json      # Config del motor
‚îú‚îÄ‚îÄ src/             # C√≥digo fuente
‚îú‚îÄ‚îÄ assets/          # Recursos
‚îú‚îÄ‚îÄ icons/           # Iconos
‚îî‚îÄ‚îÄ build/           # Compilados</pre>
            </div>

            <div class="help-section">
                <h3>Acerca de</h3>
                <p style="font-size:13px;color:var(--text-secondary)">
                    DEX STUDIO v1.0.3 ‚Äî Motor PyWebView + Python
                </p>
            </div>

        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Opciones ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="options-modal" class="modal-overlay" style="display:none">
    <div class="modal-card modal-sm">
        <div class="modal-header">
            <h2>Opciones</h2>
            <button class="modal-close" onclick="app.closeModal('options-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body" style="padding:0">
            <button class="option-row" onclick="app.closeModal('options-modal');location.reload()">
                <i data-lucide="refresh-cw"></i>
                <div>
                    <strong>Recargar interfaz</strong>
                    <span>Reinicia la UI sin perder datos</span>
                </div>
            </button>
            <button class="option-row" onclick="app.clearRecentProjects()">
                <i data-lucide="trash"></i>
                <div>
                    <strong>Limpiar recientes</strong>
                    <span>Borra la lista de proyectos recientes</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('options-modal');app.exportProjectInfo()">
                <i data-lucide="file-text"></i>
                <div>
                    <strong>Info del proyecto</strong>
                    <span>Muestra metadata.json en consola</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('options-modal');app.toggleDevTools()">
                <i data-lucide="bug"></i>
                <div>
                    <strong>Dev Tools</strong>
                    <span>Abrir herramientas de desarrollo</span>
                </div>
            </button>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Git & Herramientas ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="git-modal" class="modal-overlay" style="display:none">
    <div class="modal-card">
        <div class="modal-header">
            <h2>Git & Herramientas</h2>
            <button class="modal-close" onclick="app.closeModal('git-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body" style="padding:0">

            <p class="git-section-title">Repositorio del Editor</p>
            <button class="option-row" onclick="app.closeModal('git-modal');app.openEditorRepo()">
                <i data-lucide="github"></i>
                <div>
                    <strong>DEX STUDIO en GitHub</strong>
                    <span>Ver el repositorio oficial del editor</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('git-modal');app.checkForUpdates()">
                <i data-lucide="refresh-cw"></i>
                <div>
                    <strong>Buscar Actualizaciones</strong>
                    <span>Verificar si hay una nueva versi√≥n</span>
                </div>
            </button>

            <p class="git-section-title" style="margin-top:8px">Proyecto Actual</p>
            <button class="option-row" onclick="app.closeModal('git-modal');app.initializeGitRepo()">
                <i data-lucide="git-branch"></i>
                <div>
                    <strong>Inicializar Git</strong>
                    <span>Crear repositorio en el proyecto actual</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('git-modal');app.pushToGithub()">
                <i data-lucide="upload"></i>
                <div>
                    <strong>Subir a GitHub</strong>
                    <span>Push del proyecto a un repositorio remoto</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('git-modal');app.importFromGit()">
                <i data-lucide="download"></i>
                <div>
                    <strong>Importar desde Git</strong>
                    <span>Clonar un repositorio existente</span>
                </div>
            </button>
            <button class="option-row" onclick="app.closeModal('git-modal');app.connectGitHub()">
                <i data-lucide="key"></i>
                <div>
                    <strong>Configurar Token</strong>
                    <span>Guardar token de acceso personal</span>
                </div>
            </button>

        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Extension Detail ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="ext-detail-modal" class="modal-overlay" style="display:none">
    <div class="modal-card modal-lg">
        <div class="modal-header">
            <div style="display:flex;align-items:center;gap:12px">
                <div id="ext-detail-icon" class="ext-detail-hero-icon">
                    <i data-lucide="puzzle"></i>
                </div>
                <div>
                    <h2 id="ext-detail-name">Extensi√≥n</h2>
                    <p id="ext-detail-meta" style="font-size:11px;color:var(--text-tertiary);margin-top:2px"></p>
                </div>
            </div>
            <button class="modal-close" onclick="app.closeModal('ext-detail-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body">
            <div id="ext-detail-actions" style="margin-bottom:16px;display:flex;gap:8px"></div>
            <p id="ext-detail-desc" style="font-size:13px;color:var(--text-secondary);margin-bottom:16px"></p>
            <div class="ext-detail-readme-container">
                <h3 style="font-size:13px;font-weight:600;color:var(--text-primary);margin-bottom:10px;display:flex;align-items:center;gap:6px">
                    <i data-lucide="book-open" style="width:14px;height:14px"></i> README
                </h3>
                <div id="ext-detail-readme" class="ext-detail-readme">
                    <p class="empty-state">Cargando...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Compilar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="compile-modal" class="modal-overlay" style="display:none">
    <div class="modal-card modal-sm">
        <div class="modal-header">
            <h2>Compilar / Empaquetar</h2>
            <button class="modal-close" onclick="app.closeModal('compile-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body" style="padding:0">
            <p id="compile-recommended" style="padding:12px 20px 0;font-size:11px;color:var(--accent);font-weight:600"></p>
            <button class="option-row" onclick="app.compileDeb()">
                <i data-lucide="package"></i>
                <div>
                    <strong>Compilar .deb</strong>
                    <span>Empaqueta como aplicaci√≥n nativa Linux</span>
                </div>
            </button>
            <button class="option-row" onclick="app.compileZip()">
                <i data-lucide="archive"></i>
                <div>
                    <strong>Empaquetar .zip</strong>
                    <span>Crea un archivo ZIP del proyecto</span>
                </div>
            </button>
            <button class="option-row" onclick="app.compileTar()">
                <i data-lucide="file-archive"></i>
                <div>
                    <strong>Exportar .tar.gz</strong>
                    <span>Exporta el proyecto completo comprimido</span>
                </div>
            </button>
            <button class="option-row" id="compile-publish-btn" style="display:none" onclick="app.publishExtension()">
                <i data-lucide="upload"></i>
                <div>
                    <strong>üì§ Publicar Extensi√≥n</strong>
                    <span>Publicar en tu repo de GitHub y registrar en el marketplace</span>
                </div>
            </button>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Ejecutar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="run-modal" class="modal-overlay" style="display:none">
    <div class="modal-card modal-sm">
        <div class="modal-header">
            <h2>Ejecutar Proyecto</h2>
            <button class="modal-close" onclick="app.closeModal('run-modal')">
                <i data-lucide="x"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group" style="margin-bottom:12px">
                <label style="font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:4px;display:block">Archivo principal</label>
                <input type="text" id="run-main-file" value="main.py" class="form-input" placeholder="main.py">
            </div>
            <div class="form-group" style="margin-bottom:12px">
                <label style="font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:4px;display:block">Int√©rprete</label>
                <select id="run-interpreter" class="form-input">
                    <option value="python3">Python 3</option>
                    <option value="node">Node.js</option>
                    <option value="bash">Bash</option>
                    <option value="python">Python</option>
                </select>
            </div>
            <div class="form-group" style="margin-bottom:16px">
                <label style="font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:4px;display:block">Argumentos</label>
                <input type="text" id="run-args" value="" class="form-input" placeholder="--verbose --port 8080">
            </div>
            <div style="display:flex;gap:8px;justify-content:flex-end">
                <button class="btn-secondary btn-sm" onclick="app.saveRunConfig()">
                    <i data-lucide="save"></i> Guardar Config
                </button>
                <button class="btn-primary btn-sm" onclick="app.executeRun()">
                    <i data-lucide="play"></i> Ejecutar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Modal: Diff ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="diff-modal" class="modal-overlay" style="display:none">
    <div class="modal-card modal-lg">
        <div class="modal-header">
            <h2>Git Diff</h2>
            <button class="modal-close" onclick="app.closeModal('diff-modal')"><i data-lucide="x"></i></button>
        </div>
        <div class="modal-body">
            <div class="diff-content" id="diff-content">Sin cambios</div>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Debug Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="debug-panel" class="debug-panel" style="display:none">
    <div class="debug-toolbar">
        <button class="dbg-btn" onclick="app.startDebug()"><i data-lucide="play" style="width:12px;height:12px"></i> Debug</button>
        <button class="dbg-btn" onclick="app.stopDebug()"><i data-lucide="square" style="width:12px;height:12px"></i> Stop</button>
        <span style="margin-left:auto;font-size:11px;color:var(--text-tertiary)" id="debug-status">Idle</span>
    </div>
    <div class="debug-vars" id="debug-vars">
        <p style="color:var(--text-tertiary);font-size:11px">Ejecuta un debug para ver variables</p>
    </div>
</div>

<!-- ‚îÄ‚îÄ Command Palette ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="command-palette" class="cmd-palette-overlay" style="display:none">
    <div class="cmd-palette-box">
        <input type="text" class="cmd-palette-input" id="cmd-palette-input"
            placeholder="Escribe un comando..." autocomplete="off" spellcheck="false">
        <div class="cmd-palette-list" id="cmd-palette-list"></div>
    </div>
</div>

<!-- ‚îÄ‚îÄ Notifications ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="notification-container" class="notification-container"></div>

<script src="js/main.js"></script>
<script>
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => lucide.createIcons());
    } else {
        lucide.createIcons();
    }
</script>
</body>
</html>
